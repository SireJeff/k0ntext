{{! Copilot Instructions Template - Read by GitHub Copilot VS Code extension }}
{{{metadata.header}}}
<!-- Generated: {{metadata.timestamp}} | Source: {{metadata.source}} -->

# {{registry.name}} - Copilot Instructions

## Project Identity

- **Repository:** {{registry.submodule}}
- **Description:** {{registry.description}}
- **Tech Stack:** {{#each registry.tech_stack}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}
- **Primary Language:** {{registry.primary_language}}
- **Port:** {{submodule.ports.default}}

---

## Architecture

**Pattern:** {{registry.architecture.pattern}}

**Layers:**
{{#each registry.architecture.layers}}
- {{this}}
{{/each}}

**Dependencies:**
{{#each registry.architecture.dependencies}}
- **{{@key}}:** {{this}}
{{/each}}

---

## Key Files

{{#if registry.key_files.entry_points}}
### Entry Points
{{#each registry.key_files.entry_points}}
- `{{this}}`
{{/each}}
{{/if}}

{{#if registry.key_files.api_routes}}
### API Routes
{{#each registry.key_files.api_routes}}
- `{{this}}`
{{/each}}
{{/if}}

{{#if registry.key_files.core}}
### Core
{{#each registry.key_files.core}}
- `{{this}}`
{{/each}}
{{/if}}

{{#if registry.key_files.config}}
### Configuration
{{#each registry.key_files.config}}
- `{{this}}`
{{/each}}
{{/if}}

---

## Commands

| Command | Script |
|---------|--------|
{{#each registry.commands}}
| {{@key}} | `{{this}}` |
{{/each}}

---

## Relevant Workflows

{{#each workflows}}
### {{name}}

**Category:** {{category}} | **Complexity:** {{complexity}}

{{description}}

**Key Entry Points:**
{{#each entry_points}}
- `{{endpoint}}` - {{purpose}}
{{/each}}

{{/each}}

---

## Critical Gotchas

{{#each gotchas}}
### {{id}}: {{title}}

**Severity:** {{severity}}

{{symptom}}

**Fix:** {{fix_summary}}

{{/each}}

---

## Critical Constraints

{{#each registry.critical_constraints}}
- {{this}}
{{/each}}

---

{{#if active_task}}
## Active Task

**ID:** {{active_task.id}}
**Title:** {{active_task.title}}
**Priority:** {{active_task.priority}}

{{active_task.description}}

**Constraints:**
{{#each active_task.constraints}}
- {{this}}
{{/each}}

**Acceptance Criteria:**
{{#each active_task.acceptance_criteria}}
- [ ] {{this}}
{{/each}}

{{#if active_task.cross_repo_context}}
### Cross-Repository Context
{{#if active_task.cross_repo_context.depends_on}}
**Depends On:**
{{#each active_task.cross_repo_context.depends_on}}
- {{this}}
{{/each}}
{{/if}}
{{#if active_task.cross_repo_context.affects}}
**Affects:**
{{#each active_task.cross_repo_context.affects}}
- {{this}}
{{/each}}
{{/if}}
{{/if}}

{{/if}}

---

## Cross-Repository References

Files from other repositories are marked with `[EXTERNAL:repo]` prefix.

**Other Repositories:**
{{#each cross_repos}}
- **{{name}}:** {{description}}
{{/each}}

---

## Environment Variables

**Required:**
{{#each registry.environment.required}}
- `{{this}}`
{{/each}}

{{#if registry.environment.optional}}
**Optional:**
{{#each registry.environment.optional}}
- `{{this}}`
{{/each}}
{{/if}}

---

*This file is auto-generated by the Federated Context System.*
*Regenerate with: `npm run federate` from monorepo root.*
