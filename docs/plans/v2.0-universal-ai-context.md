# v2.0 Universal AI Context Engineering - Release Plan

**Version:** 2.0.0
**Codename:** Federation
**Target Release:** March 2026
**Timeline:** 3 weeks (17 working days)

---

## Executive Summary

Transform `create-claude-context` into `create-ai-context` - a universal context engineering system supporting multiple AI coding assistants across single projects and monorepos.

### Key Deliverables
- New package: `create-ai-context` (npm)
- Universal directory: `.ai-context/` (replaces `.claude/`)
- Universal entry point: `AI_CONTEXT.md` (replaces `CLAUDE.md`)
- Multi-AI output: Copilot, Cline, Antigravity, Universal markdown
- Monorepo federation support
- Handlebars template system

---

## Breaking Changes (v1.x â†’ v2.0)

| Change | Before (v1.x) | After (v2.0) |
|--------|---------------|--------------|
| Package name | `create-claude-context` | `create-ai-context` |
| Context directory | `.claude/` | `.ai-context/` |
| Root entry file | `CLAUDE.md` | `AI_CONTEXT.md` |
| Template system | `{{PLACEHOLDER}}` | Handlebars (`.hbs`) |
| AI support | Claude Code only | Claude, Copilot, Cline, Antigravity |
| Project types | Single only | Single + Monorepo |

---

## Issues Addressed

This release addresses the following GitHub issues:

| Issue | Title | Status |
|-------|-------|--------|
| #1 | [ROADMAP] v2.0 - Universal AI Context Engineering | âœ… Main roadmap |
| #2 | Abstract directory structure from `.claude/` to `.ai-context/` | âœ… Implemented |
| #3 | Rename entry point `CLAUDE.md` to universal format | âœ… Implemented |
| #4 | Abstract command names from `/rpi-*` to universal format | ðŸ”¶ Partial (naming only) |
| #5 | Create tool detection system | âœ… Implemented |
| #6 | Create adapter layer for tool-specific features | âœ… Implemented |
| #7 | Add Cursor IDE support | ðŸ”œ Deferred to v2.1 |
| #8 | Add Cline support | âœ… Implemented |
| #9 | Add GitHub Copilot support | âœ… Implemented |
| #10 | Add Windsurf support | ðŸ”œ Deferred to v2.1 |
| #11 | Add Aider support | ðŸ”œ Deferred to v2.1 |
| #12 | Add Continue support | ðŸ”œ Deferred to v2.1 |
| #13 | Rename npm package to `create-ai-context` | âœ… Implemented |
| #14 | Create tool-specific plugins | ðŸ”œ Deferred to v2.1 |
| #15 | Publish scoped packages `@ai-context/*` | ðŸ”œ Deferred to v2.2 |
| #16 | Cross-tool session synchronization | ðŸ”œ Deferred to v2.2 |
| #17 | Propose universal schema for AI context | ðŸ”¶ Partial (config schema) |
| #18 | VS Code extension for context management | ðŸ”œ Deferred to v2.3 |
| #19 | Web dashboard for context health | ðŸ”œ Deferred to v2.4 |

**Legend:** âœ… Implemented | ðŸ”¶ Partial | ðŸ”œ Deferred

---

## Architecture

### High-Level Design

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER INTERFACE                            â”‚
â”‚        CLI (create-ai-context) + Config (ai-context.json)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CORE ENGINE                             â”‚
â”‚  â€¢ Static Analyzer (entry points, workflows, architecture)  â”‚
â”‚  â€¢ Context Builder (assemble documentation)                 â”‚
â”‚  â€¢ Handlebars Renderer (template engine)                    â”‚
â”‚  â€¢ Federation Engine (monorepo orchestration)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ADAPTER LAYER                            â”‚
â”‚   Claude â”‚ Copilot â”‚ Cline â”‚ Antigravity â”‚ (Future tools)   â”‚
â”‚   Each adapter: templates + format spec + output writer     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     OUTPUT FILES                             â”‚
â”‚  .ai-context/  â”‚  .github/copilot-instructions.md           â”‚
â”‚  AI_CONTEXT.md â”‚  .clinerules  â”‚  .agent/  (multi-file)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Package Structure

```
packages/
â”œâ”€â”€ create-ai-context/              # Main CLI package (published to npm)
â”‚   â”œâ”€â”€ bin/
â”‚   â”‚   â””â”€â”€ create-ai-context.js    # CLI entry point
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ index.js                # Main orchestrator
â”‚   â”‚   â”œâ”€â”€ static-analyzer.js      # Codebase analysis (from v1)
â”‚   â”‚   â”œâ”€â”€ detector.js             # Tech stack detection (from v1)
â”‚   â”‚   â”œâ”€â”€ template-renderer.js    # Handlebars engine (NEW)
â”‚   â”‚   â”œâ”€â”€ ai-context-generator.js # Multi-AI orchestrator (NEW)
â”‚   â”‚   â”œâ”€â”€ federation-engine.js    # Monorepo support (NEW)
â”‚   â”‚   â”œâ”€â”€ adapters/               # Tool-specific adapters (NEW)
â”‚   â”‚   â”‚   â”œâ”€â”€ claude.js
â”‚   â”‚   â”‚   â”œâ”€â”€ copilot.js
â”‚   â”‚   â”‚   â”œâ”€â”€ cline.js
â”‚   â”‚   â”‚   â””â”€â”€ antigravity.js
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ templates/
â”‚   â”‚   â”œâ”€â”€ handlebars/             # Handlebars templates (NEW)
â”‚   â”‚   â”‚   â”œâ”€â”€ claude.hbs
â”‚   â”‚   â”‚   â”œâ”€â”€ copilot.hbs
â”‚   â”‚   â”‚   â”œâ”€â”€ cline.hbs
â”‚   â”‚   â”‚   â”œâ”€â”€ antigravity.hbs
â”‚   â”‚   â”‚   â””â”€â”€ partials/
â”‚   â”‚   â”œâ”€â”€ base/                   # Keep for migration (v1 templates)
â”‚   â”‚   â””â”€â”€ federation/             # Federation config templates
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ ai-context/                     # Ongoing management CLI
â”‚   â”œâ”€â”€ bin/claude-context.js       # CLI (renamed from claude-context)
â”‚   â””â”€â”€ lib/...
â”‚
â””â”€â”€ ai-context-plugin/              # Optional plugin
    â””â”€â”€ ...
```

---

## Implementation Phases

### Phase 1: Foundation (Days 1-3)
**Goal:** New package with renamed directories

**Tasks:**
- [ ] Create `packages/create-ai-context/` directory
- [ ] Copy all files from `create-claude-context/`
- [ ] Rename internal constants: `CLAUDE_DIR` â†’ `AI_CONTEXT_DIR`
- [ ] Update paths in `installer.js`: `.claude/` â†’ `.ai-context/`
- [ ] Update `bin/create-ai-context.js` entry point
- [ ] Update `package.json` (name, description, keywords)
- [ ] Test: `npx create-ai-context` creates `.ai-context/`

**Files to Create:**
```
packages/create-ai-context/
â”œâ”€â”€ bin/create-ai-context.js        # Copy + rename
â”œâ”€â”€ lib/*.js                        # Copy + update constants
â”œâ”€â”€ templates/                      # Copy + rename
â””â”€â”€ package.json                    # New package identity
```

**Files to Modify:**
```
packages/create-ai-context/lib/installer.js      # Path constants
packages/create-ai-context/lib/index.js          # References
packages/create-ai-context/lib/template-populator.js  # References
```

---

### Phase 2: Handlebars Migration (Days 4-6)
**Goal:** Replace `{{PLACEHOLDER}}` with Handlebars templates

**Tasks:**
- [ ] Add `handlebars` dependency to package.json
- [ ] Copy federation templates to `templates/handlebars/`
- [ ] Create `lib/template-renderer.js`
- [ ] Register partials (header, workflow-summary, gotcha-list)
- [ ] Migrate 4 core formats:
  - [ ] `claude.hbs` (from CLAUDE.md.template)
  - [ ] `copilot.hbs` (from federation)
  - [ ] `cline.hbs` (from federation)
  - [ ] `antigravity.hbs` (from federation)
- [ ] Test: Render copilot template with sample data
- [ ] Test: Render all 4 formats successfully

**Files to Create:**
```
packages/create-ai-context/lib/template-renderer.js
packages/create-ai-context/templates/handlebars/
â”œâ”€â”€ claude.hbs
â”œâ”€â”€ copilot.hbs
â”œâ”€â”€ cline.hbs
â”œâ”€â”€ antigravity.hbs
â””â”€â”€ partials/
    â”œâ”€â”€ header.hbs
    â”œâ”€â”€ workflow-summary.hbs
    â””â”€â”€ gotcha-list.hbs
```

**Template Renderer Implementation:**
```javascript
// lib/template-renderer.js
const Handlebars = require('handlebars');
const fs = require('fs');
const path = require('path');

function registerPartials(partialsDir) {
  if (!fs.existsSync(partialsDir)) return;
  const files = fs.readdirSync(partialsDir).filter(f => f.endsWith('.hbs'));
  files.forEach(file => {
    const name = path.basename(file, '.hbs');
    const content = fs.readFileSync(path.join(partialsDir, file), 'utf-8');
    Handlebars.registerPartial(name, content);
  });
}

function renderTemplate(templatePath, context) {
  const source = fs.readFileSync(templatePath, 'utf-8');
  const template = Handlebars.compile(source);
  return template(context);
}

function renderMultiFile(templatePath, context) {
  // For Antigravity: parse {{fileStart}} / {{fileEnd}} markers
  const rendered = renderTemplate(templatePath, context);
  return parseMultiFileOutput(rendered);
}

module.exports = { registerPartials, renderTemplate, renderMultiFile };
```

---

### Phase 3: Multi-AI Output (Days 7-10)
**Goal:** Generate context files for all 4 AI systems

**Tasks:**
- [ ] Create `lib/ai-context-generator.js`
- [ ] Implement `adapters/claude.js` (universal format)
- [ ] Implement `adapters/copilot.js` (GitHub Copilot)
- [ ] Implement `adapters/cline.js` (Cline extension)
- [ ] Implement `adapters/antigravity.js` (Google multi-file)
- [ ] Add CLI flag `--ai <tool>` (default: all)
- [ ] Test: Generate for Node.js Express project
- [ ] Test: Generate for Python FastAPI project
- [ ] Test: Verify files work with actual AI systems

**Output Locations:**
| Tool | Output Path |
|------|-------------|
| Claude/Universal | `.ai-context/` + `AI_CONTEXT.md` |
| Copilot | `.github/copilot-instructions.md` |
| Cline | `.clinerules` |
| Antigravity | `.agent/rules/`, `.agent/workflows/`, `.agent/skills/` |

**Adapter Interface:**
```javascript
// lib/adapters/copilot.js
module.exports = {
  name: 'copilot',
  displayName: 'GitHub Copilot',
  outputType: 'single-file',

  getOutputPath(projectRoot) {
    return path.join(projectRoot, '.github', 'copilot-instructions.md');
  },

  async generate(context, projectRoot) {
    const templatePath = path.join(__dirname, '../templates/handlebars/copilot.hbs');
    const content = renderTemplate(templatePath, context);
    const outputPath = this.getOutputPath(projectRoot);
    fs.mkdirSync(path.dirname(outputPath), { recursive: true });
    fs.writeFileSync(outputPath, content);
    return { success: true, path: outputPath };
  }
};
```

---

### Phase 4: Basic Monorepo Federation (Days 11-14)
**Goal:** Support monorepos with subprojects

**Tasks:**
- [ ] Create `lib/federation-engine.js` (adapt from FEDERATION_GUIDE)
- [ ] Create `lib/registry.js` (subproject metadata)
- [ ] Create `lib/path-translator.js` (monorepo â†’ local paths)
- [ ] Add CLI flag `--monorepo` or auto-detect
- [ ] Create config templates:
  - [ ] `.ai-context/federation/config.json`
  - [ ] `.ai-context/federation/registry/[project].json`
- [ ] Test: Generate for monorepo with 2 subprojects

**Federation Config:**
```json
{
  "$schema": "../schemas/federation.schema.json",
  "version": "2.0.0",
  "mode": "monorepo",
  "subprojects": {
    "backend": {
      "path": "packages/backend",
      "enabled": true,
      "outputs": {
        "copilot": { "enabled": true },
        "cline": { "enabled": true }
      }
    },
    "frontend": {
      "path": "apps/frontend",
      "enabled": true,
      "outputs": {
        "copilot": { "enabled": true },
        "antigravity": { "enabled": true }
      }
    }
  }
}
```

**Registry Example:**
```json
{
  "name": "backend",
  "description": "FastAPI backend service",
  "tech_stack": ["Python", "FastAPI", "PostgreSQL"],
  "workflows": ["authentication", "api-endpoints", "database"],
  "gotchas": ["AUTH-001", "DB-002"],
  "key_files": {
    "entry_points": ["src/main.py"],
    "api_routes": ["src/routes/*.py"]
  }
}
```

---

### Phase 5: Polish & Release (Days 15-17)
**Goal:** Documentation, testing, npm publish

**Tasks:**
- [ ] Write README.md for v2.0
- [ ] Write MIGRATION.md (v1 â†’ v2 guide)
- [ ] Update CHANGELOG.md
- [ ] Write integration tests
- [ ] Manual testing on 5 project types:
  - [ ] Node.js Express
  - [ ] Next.js
  - [ ] Python FastAPI
  - [ ] Go
  - [ ] Monorepo (2+ packages)
- [ ] Update npm keywords
- [ ] Create migration script
- [ ] npm publish `create-ai-context@2.0.0`
- [ ] GitHub release with notes

---

## Context Object Structure

The context object passed to Handlebars templates:

```javascript
const context = {
  // Project identity
  project: {
    name: "my-app",
    description: "My application",
    tech_stack: ["Node.js", "Express", "PostgreSQL"],
    primary_language: "javascript"
  },

  // Architecture
  architecture: {
    pattern: "layered",
    layers: [
      { name: "api", path: "src/routes/", purpose: "REST endpoints" },
      { name: "services", path: "src/services/", purpose: "Business logic" },
      { name: "models", path: "src/models/", purpose: "Database models" }
    ]
  },

  // Workflows (from static analyzer)
  workflows: [
    {
      name: "User Authentication",
      category: "security",
      complexity: "HIGH",
      description: "Handles user login, logout, and session management",
      files: ["src/routes/auth.js", "src/services/auth-service.js"],
      entry_points: [
        { endpoint: "POST /api/auth/login", file: "src/routes/auth.js", line: 15 },
        { endpoint: "POST /api/auth/logout", file: "src/routes/auth.js", line: 42 }
      ]
    }
  ],

  // Gotchas
  gotchas: [
    {
      id: "AUTH-001",
      title: "Cookie Domain for Subdomains",
      severity: "HIGH",
      category: "Authentication",
      symptom: "Login works on main site, fails on subdomain",
      fix: "Set cookie domain to '.example.com' (with leading dot)"
    }
  ],

  // Key files
  key_files: {
    entry_points: ["src/main.js", "src/server.js"],
    api_routes: ["src/routes/*.js"],
    config: [".env", "config/default.json"],
    models: ["src/models/*.js"]
  },

  // Commands
  commands: {
    install: "npm install",
    dev: "npm run dev",
    test: "npm test",
    build: "npm run build"
  },

  // Environment
  environment: {
    required: ["DATABASE_URL", "SECRET_KEY"],
    optional: ["LOG_LEVEL", "PORT"]
  },

  // Critical constraints
  critical_constraints: [
    "All API endpoints require authentication except /health",
    "Database migrations must be backward compatible",
    "Environment variables are loaded from .env in development"
  ],

  // Metadata
  metadata: {
    header: "<!-- Auto-generated by AI Context Engineering. Do not edit manually. -->",
    timestamp: "2026-01-28T12:00:00Z",
    generator_version: "2.0.0",
    source_ref: "my-app@abc1234"
  },

  // Federation (monorepo only)
  federation: {
    is_federated: false,
    subproject: null,
    cross_repos: []
  }
};
```

---

## Template Examples

### Copilot Template (copilot.hbs)
```handlebars
{{{metadata.header}}}
<!-- Generated: {{metadata.timestamp}} | Version: {{metadata.generator_version}} -->

# {{project.name}} - Copilot Instructions

## Project Identity

- **Name:** {{project.name}}
- **Description:** {{project.description}}
- **Tech Stack:** {{#each project.tech_stack}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}
- **Language:** {{project.primary_language}}

---

## Architecture

**Pattern:** {{architecture.pattern}}

**Layers:**
{{#each architecture.layers}}
- `{{path}}` - {{purpose}}
{{/each}}

---

## Key Files

{{#if key_files.entry_points}}
### Entry Points
{{#each key_files.entry_points}}
- `{{this}}`
{{/each}}
{{/if}}

{{#if key_files.api_routes}}
### API Routes
{{#each key_files.api_routes}}
- `{{this}}`
{{/each}}
{{/if}}

---

## Commands

| Command | Script |
|---------|--------|
{{#each commands}}
| {{@key}} | `{{this}}` |
{{/each}}

---

## Relevant Workflows

{{#each workflows}}
### {{name}}

**Category:** {{category}} | **Complexity:** {{complexity}}

{{description}}

**Entry Points:**
{{#each entry_points}}
- `{{endpoint}}` - {{file}}:{{line}}
{{/each}}

{{/each}}

---

## Critical Gotchas

{{#each gotchas}}
### {{id}}: {{title}}

**Severity:** {{severity}}

{{symptom}}

**Fix:** {{fix}}

{{/each}}

---

## Critical Constraints

{{#each critical_constraints}}
- {{this}}
{{/each}}

---

*Auto-generated by AI Context Engineering v{{metadata.generator_version}}*
*Regenerate with: `npx create-ai-context generate`*
```

---

## Migration Script

```javascript
// lib/migrate.js
const fs = require('fs');
const path = require('path');

async function migrateV1ToV2(projectRoot) {
  const results = { success: true, changes: [] };

  // 1. Rename .claude/ â†’ .ai-context/
  const oldDir = path.join(projectRoot, '.claude');
  const newDir = path.join(projectRoot, '.ai-context');

  if (fs.existsSync(oldDir)) {
    fs.renameSync(oldDir, newDir);
    results.changes.push({ type: 'rename', from: '.claude/', to: '.ai-context/' });
  }

  // 2. Rename CLAUDE.md â†’ AI_CONTEXT.md
  const oldFile = path.join(projectRoot, 'CLAUDE.md');
  const newFile = path.join(projectRoot, 'AI_CONTEXT.md');

  if (fs.existsSync(oldFile)) {
    fs.renameSync(oldFile, newFile);
    results.changes.push({ type: 'rename', from: 'CLAUDE.md', to: 'AI_CONTEXT.md' });
  }

  // 3. Update internal references
  const updateReferences = (filePath) => {
    if (!fs.existsSync(filePath)) return;
    let content = fs.readFileSync(filePath, 'utf-8');
    content = content.replace(/\.claude\//g, '.ai-context/');
    content = content.replace(/CLAUDE\.md/g, 'AI_CONTEXT.md');
    fs.writeFileSync(filePath, content);
  };

  updateReferences(newFile);

  // 4. Update .gitignore
  const gitignore = path.join(projectRoot, '.gitignore');
  if (fs.existsSync(gitignore)) {
    let content = fs.readFileSync(gitignore, 'utf-8');
    if (content.includes('.claude/')) {
      content = content.replace('.claude/', '.ai-context/');
      fs.writeFileSync(gitignore, content);
      results.changes.push({ type: 'update', file: '.gitignore' });
    }
  }

  return results;
}

module.exports = { migrateV1ToV2 };
```

---

## CLI Commands

### New Commands (v2.0)

```bash
# Initialize context engineering
npx create-ai-context

# Initialize for specific AI tool only
npx create-ai-context --ai copilot
npx create-ai-context --ai cline
npx create-ai-context --ai antigravity

# Initialize monorepo mode
npx create-ai-context --monorepo

# Regenerate context files
npx create-ai-context generate

# Generate for specific tool
npx create-ai-context generate --ai copilot

# Migrate from v1.x
npx create-ai-context migrate

# Validate installation
npx create-ai-context validate
```

### CLI Options

| Option | Description |
|--------|-------------|
| `--ai <tool>` | Generate for specific AI tool (claude, copilot, cline, antigravity, all) |
| `--monorepo` | Initialize in monorepo mode |
| `--migrate` | Migrate from v1.x (.claude/ â†’ .ai-context/) |
| `--yes` | Accept all defaults |
| `--dry-run` | Preview changes without writing |
| `--verbose` | Show detailed output |

---

## Testing Strategy

### Unit Tests
- Template rendering (each format)
- Path translation (monorepo paths)
- Registry filtering
- Context building

### Integration Tests

| Fixture | Tech Stack | AI Tools |
|---------|------------|----------|
| `express-simple` | Node.js, Express | All |
| `nextjs-app` | Next.js, TypeScript | All |
| `fastapi-basic` | Python, FastAPI | All |
| `monorepo-example` | Multiple | Federation |

### Manual Testing
- Test with actual GitHub Copilot VS Code extension
- Test with actual Cline VS Code extension
- Verify AI assistants understand generated context

---

## Success Criteria

- [ ] `npx create-ai-context` creates `.ai-context/` directory
- [ ] Generates working files for: Copilot, Cline, Antigravity, Universal
- [ ] Handlebars templates render correctly (no `{{PLACEHOLDER}}` left)
- [ ] Monorepo mode works with 2+ subprojects
- [ ] Migration script converts v1.x installations
- [ ] Published on npm as `create-ai-context@2.0.0`
- [ ] README and MIGRATION docs updated
- [ ] All 207+ tests pass

---

## Post-v2.0 Roadmap

### v2.1 (April 2026)
- #7: Cursor IDE support
- #10: Windsurf support
- #11: Aider support
- #12: Continue support
- Task dispatch for monorepos
- Watch mode (auto-regenerate on changes)

### v2.2 (May 2026)
- #14: Tool-specific plugins
- #15: Scoped packages `@ai-context/*`
- #16: Cross-tool session synchronization
- AI-enhanced analysis (bring back from v1.2.x)

### v2.3 (June 2026)
- #18: VS Code extension
- Drift detection
- Session management

### v2.4 (July 2026)
- #19: Web dashboard
- Analytics and context health monitoring

---

## Dependencies

### New Dependencies (v2.0)
```json
{
  "handlebars": "^4.7.8"
}
```

### Existing Dependencies (kept)
```json
{
  "commander": "^11.1.0",
  "enquirer": "^2.4.1",
  "ora": "^5.4.1",
  "chalk": "^4.1.2",
  "glob": "^10.3.10",
  "yaml": "^2.3.4",
  "ajv": "^8.12.0"
}
```

---

## Risk Mitigation

| Risk | Probability | Impact | Mitigation |
|------|-------------|--------|------------|
| Template compatibility | Medium | High | Test on 5 project types before release |
| Antigravity multi-file | Medium | Medium | Copy exact implementation from federation |
| Path translation bugs | Medium | Medium | Extensive monorepo testing |
| Breaking existing users | High | Medium | Provide migration script + docs |
| AI tool quirks | Low | Low | Iterate based on user feedback |

---

## Files Reference

### To Copy from Federation Guide
- `FEDERATION_GUIDE/federation/templates/*.hbs` â†’ All Handlebars templates
- `FEDERATION_GUIDE/federation/templates/partials/*.hbs` â†’ All partials
- `FEDERATION_GUIDE/federation/config.json` â†’ Federation config pattern
- `FEDERATION_GUIDE/federation/registry/*.json` â†’ Registry pattern
- `FEDERATION_GUIDE/federation/path-rules.json` â†’ Path translation pattern

### To Modify from v1.x
- `packages/create-claude-context/lib/static-analyzer.js` â†’ Keep, path updates
- `packages/create-claude-context/lib/detector.js` â†’ Keep, no changes
- `packages/create-claude-context/lib/template-populator.js` â†’ Replace with Handlebars
- `packages/create-claude-context/lib/installer.js` â†’ Path constants only

### To Create New
- `packages/create-ai-context/lib/template-renderer.js`
- `packages/create-ai-context/lib/ai-context-generator.js`
- `packages/create-ai-context/lib/adapters/*.js`
- `packages/create-ai-context/lib/federation-engine.js`
- `packages/create-ai-context/lib/migrate.js`

---

**Estimated Total:**
- New code: ~2,500 lines
- Modified code: ~300 lines
- Templates: ~1,500 lines (mostly copied from federation)
- Documentation: ~2,000 words

**Timeline:** 3 weeks (17 working days)

---

**Document Version:** 1.0
**Created:** 2026-01-28
**Author:** @context-engineer
